(function(t,e){"object"===typeof exports&&"object"===typeof module?module.exports=e():"function"===typeof define&&define.amd?define([],e):"object"===typeof exports?exports["vue-gn-components"]=e():t["vue-gn-components"]=e()})("undefined"!==typeof self?self:this,(function(){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var s=e[i]={i:i,l:!1,exports:{}};return t[i].call(s.exports,s,s.exports,n),s.l=!0,s.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)n.d(i,s,function(e){return t[e]}.bind(null,s));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s="fb15")}({2704:function(t,e,n){"use strict";var i=n("43a4"),s=n.n(i);s.a},"43a4":function(t,e,n){},"688f":function(t,e,n){},"70b0":function(t,e,n){(function(e){"use strict";var n=y(),i=b(),s=x(),r=_(),o={imagePlaceholder:void 0,cacheBust:!1},a={toSvg:l,toPng:c,toJpeg:u,toBlob:f,toPixelData:h,impl:{fontFaces:s,images:r,util:n,inliner:i,options:{}}};function l(t,e){return e=e||{},d(e),Promise.resolve(t).then((function(t){return g(t,e.filter,!0)})).then(p).then(v).then(i).then((function(i){return w(i,e.width||n.width(t),e.height||n.height(t))}));function i(t){return e.bgcolor&&(t.style.backgroundColor=e.bgcolor),e.width&&(t.style.width=e.width+"px"),e.height&&(t.style.height=e.height+"px"),e.style&&Object.keys(e.style).forEach((function(n){t.style[n]=e.style[n]})),t}}function h(t,e){return m(t,e||{}).then((function(e){return e.getContext("2d").getImageData(0,0,n.width(t),n.height(t)).data}))}function c(t,e){return m(t,e||{}).then((function(t){return t.toDataURL()}))}function u(t,e){return e=e||{},m(t,e).then((function(t){return t.toDataURL("image/jpeg",e.quality||1)}))}function f(t,e){return m(t,e||{}).then(n.canvasToBlob)}function d(t){"undefined"===typeof t.imagePlaceholder?a.impl.options.imagePlaceholder=o.imagePlaceholder:a.impl.options.imagePlaceholder=t.imagePlaceholder,"undefined"===typeof t.cacheBust?a.impl.options.cacheBust=o.cacheBust:a.impl.options.cacheBust=t.cacheBust}function m(t,e){return l(t,e).then(n.makeImage).then(n.delay(100)).then((function(e){var n=i(t);return n.getContext("2d").drawImage(e,0,0),n}));function i(t){var i=document.createElement("canvas");if(i.width=e.width||n.width(t),i.height=e.height||n.height(t),e.bgcolor){var s=i.getContext("2d");s.fillStyle=e.bgcolor,s.fillRect(0,0,i.width,i.height)}return i}}function g(t,e,i){return i||!e||e(t)?Promise.resolve(t).then(s).then((function(n){return r(t,n,e)})).then((function(e){return o(t,e)})):Promise.resolve();function s(t){return t instanceof HTMLCanvasElement?n.makeImage(t.toDataURL()):t.cloneNode(!1)}function r(t,e,i){var s=t.childNodes;return 0===s.length?Promise.resolve(e):r(e,n.asArray(s),i).then((function(){return e}));function r(t,e,n){var i=Promise.resolve();return e.forEach((function(e){i=i.then((function(){return g(e,n)})).then((function(e){e&&t.appendChild(e)}))})),i}}function o(t,e){return e instanceof Element?Promise.resolve().then(i).then(s).then(r).then(o).then((function(){return e})):e;function i(){function i(t,e){function i(t,e){n.asArray(t).forEach((function(n){e.setProperty(n,t.getPropertyValue(n),t.getPropertyPriority(n))}))}t.cssText?e.cssText=t.cssText:i(t,e)}i(window.getComputedStyle(t),e.style)}function s(){function i(i){var s=window.getComputedStyle(t,i),r=s.getPropertyValue("content");if(""!==r&&"none"!==r){var o=n.uid();e.className=e.className+" "+o;var a=document.createElement("style");a.appendChild(l(o,i,s)),e.appendChild(a)}function l(t,e,i){var s="."+t+":"+e,r=i.cssText?o(i):a(i);return document.createTextNode(s+"{"+r+"}");function o(t){var e=t.getPropertyValue("content");return t.cssText+" content: "+e+";"}function a(t){return n.asArray(t).map(e).join("; ")+";";function e(e){return e+": "+t.getPropertyValue(e)+(t.getPropertyPriority(e)?" !important":"")}}}}[":before",":after"].forEach((function(t){i(t)}))}function r(){t instanceof HTMLTextAreaElement&&(e.innerHTML=t.value),t instanceof HTMLInputElement&&e.setAttribute("value",t.value)}function o(){e instanceof SVGElement&&(e.setAttribute("xmlns","http://www.w3.org/2000/svg"),e instanceof SVGRectElement&&["width","height"].forEach((function(t){var n=e.getAttribute(t);n&&e.style.setProperty(t,n)})))}}}function p(t){return s.resolveAll().then((function(e){var n=document.createElement("style");return t.appendChild(n),n.appendChild(document.createTextNode(e)),t}))}function v(t){return r.inlineAll(t).then((function(){return t}))}function w(t,e,i){return Promise.resolve(t).then((function(t){return t.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),(new XMLSerializer).serializeToString(t)})).then(n.escapeXhtml).then((function(t){return'<foreignObject x="0" y="0" width="100%" height="100%">'+t+"</foreignObject>"})).then((function(t){return'<svg xmlns="http://www.w3.org/2000/svg" width="'+e+'" height="'+i+'">'+t+"</svg>"})).then((function(t){return"data:image/svg+xml;charset=utf-8,"+t}))}function y(){return{escape:f,parseExtension:e,mimeType:n,dataAsUrl:u,isDataUrl:i,canvasToBlob:r,resolveUrl:o,getAndEncode:c,uid:l(),delay:d,asArray:m,escapeXhtml:g,makeImage:h,width:p,height:v};function t(){var t="application/font-woff",e="image/jpeg";return{woff:t,woff2:t,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:e,jpeg:e,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"}}function e(t){var e=/\.([^\.\/]*?)$/g.exec(t);return e?e[1]:""}function n(n){var i=e(n).toLowerCase();return t()[i]||""}function i(t){return-1!==t.search(/^(data:)/)}function s(t){return new Promise((function(e){for(var n=window.atob(t.toDataURL().split(",")[1]),i=n.length,s=new Uint8Array(i),r=0;r<i;r++)s[r]=n.charCodeAt(r);e(new Blob([s],{type:"image/png"}))}))}function r(t){return t.toBlob?new Promise((function(e){t.toBlob(e)})):s(t)}function o(t,e){var n=document.implementation.createHTMLDocument(),i=n.createElement("base");n.head.appendChild(i);var s=n.createElement("a");return n.body.appendChild(s),i.href=e,s.href=t,s.href}function l(){var t=0;return function(){return"u"+e()+t++;function e(){return("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)}}}function h(t){return new Promise((function(e,n){var i=new Image;i.onload=function(){e(i)},i.onerror=n,i.src=t}))}function c(t){var e=3e4;return a.impl.options.cacheBust&&(t+=(/\?/.test(t)?"&":"?")+(new Date).getTime()),new Promise((function(n){var i,s=new XMLHttpRequest;if(s.onreadystatechange=o,s.ontimeout=l,s.responseType="blob",s.timeout=e,s.open("GET",t,!0),s.send(),a.impl.options.imagePlaceholder){var r=a.impl.options.imagePlaceholder.split(/,/);r&&r[1]&&(i=r[1])}function o(){if(4===s.readyState)if(200===s.status){var e=new FileReader;e.onloadend=function(){var t=e.result.split(/,/)[1];n(t)},e.readAsDataURL(s.response)}else i?n(i):h("cannot fetch resource: "+t+", status: "+s.status)}function l(){i?n(i):h("timeout of "+e+"ms occured while fetching resource: "+t)}function h(t){console.error(t),n("")}}))}function u(t,e){return"data:"+e+";base64,"+t}function f(t){return t.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")}function d(t){return function(e){return new Promise((function(n){setTimeout((function(){n(e)}),t)}))}}function m(t){for(var e=[],n=t.length,i=0;i<n;i++)e.push(t[i]);return e}function g(t){return t.replace(/#/g,"%23").replace(/\n/g,"%0A")}function p(t){var e=w(t,"border-left-width"),n=w(t,"border-right-width");return t.scrollWidth+e+n}function v(t){var e=w(t,"border-top-width"),n=w(t,"border-bottom-width");return t.scrollHeight+e+n}function w(t,e){var n=window.getComputedStyle(t).getPropertyValue(e);return parseFloat(n.replace("px",""))}}function b(){var t=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:r,shouldProcess:e,impl:{readUrls:i,inline:s}};function e(e){return-1!==e.search(t)}function i(e){var i,s=[];while(null!==(i=t.exec(e)))s.push(i[1]);return s.filter((function(t){return!n.isDataUrl(t)}))}function s(t,e,i,s){return Promise.resolve(e).then((function(t){return i?n.resolveUrl(t,i):t})).then(s||n.getAndEncode).then((function(t){return n.dataAsUrl(t,n.mimeType(e))})).then((function(n){return t.replace(r(e),"$1"+n+"$3")}));function r(t){return new RegExp("(url\\(['\"]?)("+n.escape(t)+")(['\"]?\\))","g")}}function r(t,n,r){return o()?Promise.resolve(t):Promise.resolve(t).then(i).then((function(e){var i=Promise.resolve(t);return e.forEach((function(t){i=i.then((function(e){return s(e,t,n,r)}))})),i}));function o(){return!e(t)}}}function x(){return{resolveAll:t,impl:{readAll:e}};function t(){return e(document).then((function(t){return Promise.all(t.map((function(t){return t.resolve()})))})).then((function(t){return t.join("\n")}))}function e(){return Promise.resolve(n.asArray(document.styleSheets)).then(e).then(t).then((function(t){return t.map(s)}));function t(t){return t.filter((function(t){return t.type===CSSRule.FONT_FACE_RULE})).filter((function(t){return i.shouldProcess(t.style.getPropertyValue("src"))}))}function e(t){var e=[];return t.forEach((function(t){try{n.asArray(t.cssRules||[]).forEach(e.push.bind(e))}catch(i){console.log("Error while reading CSS rules from "+t.href,i.toString())}})),e}function s(t){return{resolve:function(){var e=(t.parentStyleSheet||{}).href;return i.inlineAll(t.cssText,e)},src:function(){return t.style.getPropertyValue("src")}}}}}function _(){return{inlineAll:e,impl:{newImage:t}};function t(t){return{inline:e};function e(e){return n.isDataUrl(t.src)?Promise.resolve():Promise.resolve(t.src).then(e||n.getAndEncode).then((function(e){return n.dataAsUrl(e,n.mimeType(t.src))})).then((function(e){return new Promise((function(n,i){t.onload=n,t.onerror=i,t.src=e}))}))}}function e(s){return s instanceof Element?r(s).then((function(){return s instanceof HTMLImageElement?t(s).inline():Promise.all(n.asArray(s.childNodes).map((function(t){return e(t)})))})):Promise.resolve(s);function r(t){var e=t.style.getPropertyValue("background");return e?i.inlineAll(e).then((function(e){t.style.setProperty("background",e,t.style.getPropertyPriority("background"))})).then((function(){return t})):Promise.resolve(t)}}}t.exports=a})()},"8cc6":function(t,e,n){"use strict";var i=n("a919"),s=n.n(i);s.a},"8d6e":function(t,e,n){"use strict";var i=n("688f"),s=n.n(i);s.a},a919:function(t,e,n){},c62d:function(t,e,n){},d10e:function(t,e,n){"use strict";var i=n("e78f"),s=n.n(i);s.a},d4c9:function(t,e,n){"use strict";var i=n("c62d"),s=n.n(i);s.a},e78f:function(t,e,n){},f6fd:function(t,e){(function(t){var e="currentScript",n=t.getElementsByTagName("script");e in t||Object.defineProperty(t,e,{get:function(){try{throw new Error}catch(i){var t,e=(/.*at [^\(]*\((.*):.+:.+\)$/gi.exec(i.stack)||[!1])[1];for(t in n)if(n[t].src==e||"interactive"==n[t].readyState)return n[t];return null}}})})(document)},fb15:function(t,e,n){"use strict";var i;(n.r(e),"undefined"!==typeof window)&&(n("f6fd"),(i=window.document.currentScript)&&(i=i.src.match(/(.+\/)[^/]+\.js(\?.*)?$/))&&(n.p=i[1]));var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"datepicker-wrap"},[n("div",{staticClass:"date-wrapper",style:{width:typeof t.size===String?t.size:t.size+"px"}},[n("div",{staticClass:"header"},[n("a",{staticClass:"btn prev",style:{color:t.theme},attrs:{href:"javascript:;"},on:{click:function(e){return t.showDateInfo("prevYear")}}},[t._v("<<")]),n("a",{staticClass:"btn prev",style:{color:t.theme},attrs:{href:"javascript:;"},on:{click:function(e){return t.showDateInfo("prevMonth")}}},[t._v("<")]),n("a",{staticClass:"btn next",style:{color:t.theme},attrs:{href:"javascript:;"},on:{click:function(e){return t.showDateInfo("nextYear")}}},[t._v(">>")]),n("a",{staticClass:"btn next",style:{color:t.theme},attrs:{href:"javascript:;"},on:{click:function(e){return t.showDateInfo("nextMonth")}}},[t._v(">")]),n("span",{staticClass:"curr-month"},[t._v(t._s(t.dateInfo.year)+"-"+t._s(10>t.dateInfo.month?"0"+t.dateInfo.month:t.dateInfo.month))])]),n("div",{ref:"content",staticClass:"date-content"},[n("ul",{staticClass:"week-title",style:{background:t.theme}},[n("li",{staticClass:"week-item"},[t._v("一")]),n("li",{staticClass:"week-item"},[t._v("二")]),n("li",{staticClass:"week-item"},[t._v("三")]),n("li",{staticClass:"week-item"},[t._v("四")]),n("li",{staticClass:"week-item"},[t._v("五")]),n("li",{staticClass:"week-item"},[t._v("六")]),n("li",{staticClass:"week-item"},[t._v("日")])]),t._l(t.dateInfo.detailInfo.length/7,(function(e,i){return n("ul",{key:i,ref:"week",refInFor:!0,staticClass:"date-list"},t._l(t.dateInfo.detailInfo.slice(7*i,7*i+7),(function(e,i){return n("li",{key:i,staticClass:"date-item",class:{active:e.isCheckIn,"no-current-month":e.date!==e.curDate},on:{click:function(n){return t.onSelectMonth(e.curMonth+1,t.dateInfo)}}},[t._v(" "+t._s(e.curDate)+" "),e.isCheckIn?n("span",{style:{background:t.theme}}):t._e()])})),0)}))],2)])])},r=[],o={name:"CheckIn",props:{checkIns:{type:Array,default(){return[]}},size:{type:[String,Number],default:500},theme:{type:String,default:"#369"}},data(){return{dateInfo:{}}},created(){this.getDateInfo()},mounted(){this._normalizeTreeToInfo(this._createDateTree(this.checkIns))},watch:{checkIns(t){this._normalizeTreeToInfo(this._createDateTree(t))}},methods:{getDateInfo(t=(new Date).getFullYear(),e=(new Date).getMonth()+1){const n=new Date(t,e-1,1);let i=n.getDay();!i&&(i=7),t=n.getFullYear(),e=n.getMonth()+1;const s=new Date(t,e,0),r=s.getDate(),o=new Date(t,e-1,0),a=o.getDate(),l=[];for(let c=0;c<42;c++){const n=c-i+2;let s=n,o=e-1;n<=0?(o--,s=a+n):n>r&&(o++,s=n-r),o>=13&&(o=12),l.push({date:n,year:t,curDate:s,curMonth:o,dateStr:h(t,o,s)})}function h(t,e,n){const i=new Date(t,e,n),s=i.getFullYear(),r=(i.getMonth(),i.getMonth()+1),o=(i.getDate(),i.getDate());return`${s}-${r}-${o}`}this.dateInfo={year:t,month:e,detailInfo:l},this._normalizeTreeToInfo(this._createDateTree(this.checkIns))},onSelectMonth(t,e){t!==e.month&&this.getDateInfo(e.year,t)},showDateInfo(t){let{year:e,month:n}=this.dateInfo;"prevYear"===t?e--:"nextYear"===t?e++:"prevMonth"===t?n--:"nextMonth"===t&&n++,this.getDateInfo(e,n)},_createDateTree(t){if(!t.length)return{};const e={};return this._normalizeDate(t).forEach(t=>{const n=t.split("-")[0],i=t.split("-")[1];e[n]=e[n]||{},(e[n][i]||(e[n][i]=[])).push(t),e[n][i]=[...new Set(e[n][i])]}),e},_normalizeDate(t){if(Array.isArray(t))return t.map(t=>{if(13===(t+"").length){const e=new Date(t);return`${e.getFullYear()}-${e.getMonth()+1}-${e.getDate()}`}return t.indexOf(".")>-1?t.replace(/\./g,"-"):t})},_normalizeTreeToInfo(t={}){if(this.isSetFontSize||setTimeout(()=>{this.isSetFontSize=!0,this.$refs["content"].style.fontSize=this.$refs["week"]&&.3*this.$refs["week"][0].clientHeight+"px"},20),!Object.keys(t).length)return;const e=t[this.dateInfo.year]&&t[this.dateInfo.year][(this.dateInfo.month,this.dateInfo.month)]||[];if(!e.length)return;const{detailInfo:n}=this.dateInfo;for(let i=0,s=e.length;i<s;i++)for(let t=0,r=n.length;t<r;t++){const s=n[t];s.dateStr===e[i]&&(s["isCheckIn"]=!0)}this.dateInfo.detailInfo.__ob__.dep.notify()}}},a=o;n("2704");function l(t,e,n,i,s,r,o,a){var l,h="function"===typeof t?t.options:t;if(e&&(h.render=e,h.staticRenderFns=n,h._compiled=!0),i&&(h.functional=!0),r&&(h._scopeId="data-v-"+r),o?(l=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),s&&s.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(o)},h._ssrRegister=l):s&&(l=a?function(){s.call(this,this.$root.$options.shadowRoot)}:s),l)if(h.functional){h._injectStyles=l;var c=h.render;h.render=function(t,e){return l.call(e),c(t,e)}}else{var u=h.beforeCreate;h.beforeCreate=u?[].concat(u,l):[l]}return{exports:t,options:h}}var h=l(a,s,r,!1,null,"10669a9f",null),c=h.exports;c.install=t=>t.component(c.name,c);var u=c,f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._t("default",null,{date:t.date})],2)},d=[],m={name:"Countdown",props:{time:{type:[Date,String,Number],default(){return new Date}},isSMSMode:{type:Boolean,default:!1},totalTime:{type:[Number,String],default:0}},created(){(!this.isSMSMode||localStorage.getItem("__SMS_total_time__")>0)&&this.start()},data(){return{date:{year:0,month:0,date:0,hours:0,minutes:0,seconds:0,timeLeft:localStorage.getItem("__SMS_total_time__")||this.totalTime}}},methods:{start(){this.initTime()},pause(){clearTimeout(this.timer)},initTime(){if(this.isSMSMode&&this.date.timeLeft>0)this.mySetInterval(t=>{localStorage.setItem("__SMS_total_time__",this.date.timeLeft-=1),localStorage.getItem("__SMS_total_time__")<=0&&(this.$emit("end"),clearTimeout(t),localStorage.removeItem("__SMS_total_time__"))},1e3);else{let t;if("[object Date]"===Object.prototype.toString.call(this.time))t=this.time;else if("string"===typeof this.time){if(-1!==this.time.indexOf("-")){const e=this.time.split("-");e[1]=e[1]-1,t=new Date(...e)}else if(-1!==this.time.indexOf(".")){const e=this.time.split(".");e[1]=e[1]-1,t=new Date(...e)}}else 13===(this.time+"").length&&(t=new Date(this.time));if(t=t.getTime()-(new Date).getTime(),t<0)return;this.mySetInterval(e=>{t-=1e3,this.timer=e,t<=0&&(this.$emit("end"),this.pause()),this.normalizeTime(t)},1e3)}},normalizeTime(t){t/=1e3;const e=31536e3,n=2592e3,i=86400,s=3600,r=60;t>e&&(this.date.year=this.paramsProcess(t,e)),t>n&&(this.date.month=this.paramsProcess(t,e,n)),t>i&&(this.date.date=this.paramsProcess(t,e,n,i)),t>s&&(this.date.hours=this.paramsProcess(t,e,n,i,s)),t>r&&(this.date.minutes=this.paramsProcess(t,e,n,i,s,r)),t>1&&(this.date.seconds=this.paramsProcess(t,e,n,i,s,r,1))},paramsProcess(...t){const e=t.slice(0,-1),n=t[t.length-1],i=e.reduce((t,e)=>{return t%e});return Math.floor(i/n>1?i/n:0)},mySetInterval(t,e){let n;const i=(t,e)=>{n=setTimeout(()=>{i(t,e),t.call(this,n)},e)};i(t,e)}}},g=m,p=l(g,f,d,!1,null,null,null),v=p.exports;v.install=t=>t.component(v.name,v);var w=v,y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"wrap",staticClass:"wrap"},[n("img",{ref:"img",staticClass:"img",attrs:{src:t.src,width:t.imgWidth,draggable:!1},on:{dragover:function(t){t.preventDefault(),t.stopPropagation()},click:t.handleVoidClick,contextmenu:function(e){return e.preventDefault(),t.handleContextmenu(e)}}}),n("div",{directives:[{name:"show",rawName:"v-show",value:t.isHideLabels,expression:"isHideLabels"}],staticClass:"label-list"},t._l(t.labels,(function(e,i){return n("div",{key:e._id,ref:"label-item",refInFor:!0,staticClass:"label-item",style:{left:e.left+"px",top:e.top+"px"},attrs:{draggable:!0},on:{contextmenu:function(t){t.preventDefault()},dblclick:t.handleDoubleClick,click:function(e){return t.handleRemoveLabel(i)},dragend:function(e){return t.ondragend(e,i)},dragstart:function(e){return t.ondragstart(e,i)}}},[n("span",{staticClass:"label-text",on:{click:function(t){t.stopPropagation()},blur:function(e){return t.handleDivBlur(e,i)}}},[t._v(t._s(e.text))])])})),0),n("ul",{directives:[{name:"show",rawName:"v-show",value:t.isShowMenu,expression:"isShowMenu"}],ref:"menu",staticClass:"menu-list",on:{click:t.hideMenu}},t._l(t.menus,(function(e,i){return n("li",{key:i,staticClass:"menu-item",on:{contextmenu:function(t){t.preventDefault()},mouseenter:t.onMouseEnter,mouseleave:t.onMouseLeave,click:function(n){return t.onMenuClick(e)}}},[t._v(t._s(e))])})),0)])},b=[],x=n("70b0"),_=n.n(x);const S=30,k=5,C=6;var I={name:"ImgLabel",props:{isShowSaveBtn:{type:Boolean,default:!0},src:{type:String,default:""},width:{type:[Number,String],default:500},theme:{type:String,default:"#3b8bcc"}},created(){this.pos={},this.dragstart={},!this.isShowSaveBtn&&this.menus.splice(1,1)},mounted(){this.$nextTick(()=>{this.menu=this.$refs["menu"],this.img=this.$refs["img"]})},data(){return{isHideLabels:!0,menus:["新建标签","保存标签","清除标签","隐藏标签","导出为图片"],isShowMenu:!1,labels:JSON.parse(localStorage.getItem("__labels__"))||[]}},computed:{imgWidth(){return"number"===typeof this.width?this.width:this.width.slice(0,-2)}},methods:{ondragend(t,e){const n=this.img.getBoundingClientRect(),i=this.$refs["label-item"][e].clientWidth,s=this.$refs["label-item"][e].clientHeight;this.labels[e].left=Math.max(0,Math.min(t.clientX-n.left-this.dragstart.left,n.width-i-C)),this.labels[e].top=Math.max(0+C,Math.min(t.clientY-n.top-this.dragstart.top,n.height-s-2*k))},ondragstart(t,e){const n=this.img.getBoundingClientRect();this.dragstart["left"]=t.clientX-n.left-this.labels[e].left,this.dragstart["top"]=t.clientY-n.top-this.labels[e].top},onMenuClick(t){switch(t){case"新建标签":this.createdLabel();break;case"保存标签":this.saveLabel();break;case"清除标签":this.clearLabel();break;case"隐藏标签":case"显示标签":this.hideLabel();break;case"导出为图片":this.exportImg();break;default:}},handleRemoveLabel(t){this.labels.splice(t,1)},handleVoidClick(){this.hideMenu()},handleDivBlur(t,e){""===t.target.innerHTML&&this.labels.splice(e,1),t.target.setAttribute("contenteditable",!1),this.labels[e].text=t.target.innerHTML},handleDoubleClick(t){t.target.setAttribute("contenteditable",!0),t.target.focus(),this.$nextTick(()=>{if(document.selection){let e=document.body.createTextRange();e.moveToElementText(t.target),e.select()}else if(window.getSelection){const e=document.createRange();e.selectNodeContents(t.target),window.getSelection().removeAllRanges(),window.getSelection().addRange(e)}})},createdLabel(){this.labels.push({left:this.pos.left,top:this.pos.top,text:"新建标签",_id:(new Date).getTime()})},saveLabel(){localStorage.setItem("__labels__",JSON.stringify(this.labels))},clearLabel(){localStorage.removeItem("__labels__"),this.labels=[]},hideLabel(){this.isHideLabels=!this.isHideLabels,this.labels.length&&(this.menus[3]="显示标签"===this.menus[3]?"隐藏标签":"显示标签")},exportImg(){setTimeout(()=>{_.a.toJpeg(this.$refs["wrap"]).then(t=>{const e=document.createElement("a");e.href=t,e.download=this.getDate(),e.click()})})},handleContextmenu(t){const e=t.target.getBoundingClientRect();this.showMenu(),this.$nextTick(()=>{const n=Math.min(t.clientX-e.left,this.img.offsetWidth-this.menu.offsetWidth),i=Math.min(t.clientY-e.top,this.img.offsetHeight-this.menu.offsetHeight);this.pos["left"]=n,this.pos["top"]=t.clientY-e.top+S+k>this.img.offsetWidth?t.clientY-e.top-S-k:t.clientY-e.top,this.menu.style.top=i+"px",this.menu.style.left=n+"px"})},showMenu(){this.isShowMenu=!0},hideMenu(){this.isShowMenu=!1},onMouseEnter(t){t.target.style.backgroundColor=this.theme,t.target.style.color="#fff"},onMouseLeave(t){t.target.style.backgroundColor="#fff",t.target.style.color="#000"},getDate(){const t=new Date,e=t.getFullYear(),n=t.getMonth()+1<10?`0${t.getMonth()+1}`:t.getMonth()+1,i=t.getDate()<10?`0${t.getDate()}`:t.getDate();return`图片-${e}-${n}-${i}`}}},M=I,$=(n("8cc6"),l(M,y,b,!1,null,"38cbc95a",null)),T=$.exports;T.install=t=>t.component(T.name,T);var D=T,P=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{ref:"wrap",staticClass:"magnifier-wrap"},[n("div",{ref:"small",staticClass:"small-wrap",on:{mouseleave:t.onMouseleave,mousemove:t.onMousemove,mouseenter:t.onMouseenter}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],ref:"mask",staticClass:"mask-wrap"}),n("img",{attrs:{src:t.minImgUrl,width:t.boxSize,height:t.boxSize}})]),n("div",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],ref:"maxBox",staticClass:"max-wrap"},[n("img",{ref:"img",staticClass:"img",style:{width:t.maxImgWidth+"px",height:t.maxImgHeight+"px"},attrs:{src:t.maxImgUrl},on:{load:t.setMaskSize}})])])])},A=[],E={name:"Magnifier",props:{boxSize:{type:Number,default:500},minImgUrl:{type:String,default:""},maxImgUrl:{type:String,default:""},autoReverse:{type:Boolean,default:!0},direction:{type:String,default:"right"}},data(){return{isShow:!1,maxImgWidth:"",maxImgHeight:""}},methods:{setMaskSize(t){this.isLoad=!0,this.maxImgWidth=t.target.width,this.maxImgHeight=t.target.height,this.$refs["img"].width=t.target.width,this.$refs["img"].height=t.target.height,this.$nextTick(()=>{this.initDom()})},initDom(){this.wrap=this.$refs["wrap"],this.maxBox=this.$refs["maxBox"],this.mask=this.$refs["mask"],this.maxImg=this.$refs["img"],this.small=this.$refs["small"],this.smallWidth=this.getDomAttr(this.small,"width"),this.smallHeight=this.getDomAttr(this.small,"height"),this.maxBox.style.width=this.boxSize+"px",this.maxBox.style.height=this.boxSize+"px"},getDomAttr(t,e){return parseInt(getComputedStyle(t)[e].slice(0,-2))},onMouseenter(){this.isShow=!0},onMouseleave(){this.isShow=!1},onMousemove(t){if(!this.wrap||!this.isLoad)return;const e=this.$refs["mask"],n=this.$refs["img"].width,i=this.smallWidth;e.style.width=i*(i/n)+"px",e.style.height=i*(i/n)+"px";const s=this.wrap.getBoundingClientRect().left,r=this.wrap.getBoundingClientRect().top,o=this.getDomAttr(this.wrap,"padding-left"),a=this.getDomAttr(this.wrap,"padding-top");let l=t.clientX-s-this.mask.offsetWidth/2,h=t.clientY-r-this.mask.offsetHeight/2;const c=s+this.maxBox.clientLeft+this.small.clientLeft+this.wrap.clientLeft+o+this.small.clientWidth,u=s+this.wrap.clientLeft+o-2*this.small.clientLeft-this.small.clientWidth;let f=-1;if(this.autoReverse){const t=c+this.getDomAttr(this.maxBox,"width")>window.innerWidth;f=t?u:c}else"right"===this.direction?f=c:"left"===this.direction&&(f=u);this.maxBox.style.left=f+"px",this.maxBox.style.top=r+this.wrap.clientTop-this.maxBox.clientTop+a+this.small.clientTop+"px",l<o?l=o:l>this.small.offsetWidth-this.mask.offsetWidth+o&&(l=this.small.offsetWidth-this.mask.offsetWidth+o),h<a?h=a:h>this.small.offsetHeight-this.mask.offsetHeight+a&&(h=this.small.offsetHeight-this.mask.offsetHeight+a),this.mask.style.left=l+"px",this.mask.style.top=h+"px";const d=(l-o)/(this.smallWidth-this.mask.offsetWidth),m=(h-a)/(this.smallHeight-this.mask.offsetHeight);this.maxImg.style.left=-d*(this.maxImg.width-this.maxBox.offsetWidth)+"px",this.maxImg.style.top=-m*(this.maxImg.height-this.maxBox.offsetHeight)+"px"}}},L=E,B=(n("8d6e"),l(L,P,A,!1,null,"d775f678",null)),R=B.exports;R.install=t=>t.component(R.name,R);var N=R,H=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wrap",style:{width:t.width+"px"},on:{mouseup:t.onMouseup,mousemove:function(e){return e.stopPropagation(),t.onMousemove(e)},mouseleave:t.onMouseup}},[n("div",{staticClass:"tips-info"},[n("span",{staticClass:"tips"},[t._v("完成拼图验证")]),t.showNextImg?n("span",{staticClass:"next-img",on:{click:t.onNextImg}},[t._v("换一张")]):t._e()]),n("div",{staticClass:"slider-check-wrap",style:{width:t.width+"px"}},[n("canvas",{ref:"bg",staticClass:"bg-canvas",attrs:{width:t.width,height:t.height}}),n("canvas",{ref:"card",staticClass:"card-canvas",attrs:{width:t.width,height:t.height}}),n("div",{staticClass:"slider-wrap"},[n("div",{ref:"progress-bar",staticClass:"progress-bar"}),n("div",{ref:"btn",staticClass:"btn",on:{mousedown:function(e){return e.stopPropagation(),t.onMousedown(e)}}},[t._v(">")]),n("div",{ref:"slider",staticClass:"slider"},[t._v(t._s(t.tips))])])])])},j=[];const W=50;var z={name:"SlideCheck",props:{radius:{type:Number,default:10},src:{type:[String,Array],default:""},width:{type:Number,default:300},height:{type:Number,default:300},theme:{type:String,default:"#369"}},data(){return{range:0,tips:"向右滑动完成拼图"}},computed:{showNextImg(){return Array.isArray(this.src)&&this.src.length>1}},mounted(){Array.isArray(this.src)?this.initCanvas(this.src[0]):this.initCanvas(this.src),this.initDomInfo()},methods:{onNextImg(){this.reset(),Array.isArray(this.src)?this.initCanvas(this.src[Math.floor(Math.random()*this.src.length)]):this.initCanvas(this.src)},initDomInfo(){this.pos=this.$refs["btn"].getBoundingClientRect(),"#369"!==this.theme&&(this.$refs["slider"].style.boxShadow=`0 0 10px 0 ${this.theme}`,this.$refs["slider"].style.color=this.theme,this.$refs["btn"].style.background=this.theme,this.$refs["btn"].style.boxShadow=`0 0 10px 0 ${this.theme}`)},onMousedown(t){this.track={top:t.clientY,bottom:t.clientY},this.track2={top:t.clientY,bottom:t.clientY},this.isEnterDown=!0,this.clickPos=t.clientX,this.tips="向右滑动完成拼图",this.$refs["btn"].style.transition="",this.$refs["card"].style.transition="",this.$refs["progress-bar"].style.transition="",this.diff=t.clientX-this.pos.left},calcTrack(t){let e=this.track.top,n=this.track.bottom;t>this.track.top?(this.track.top=t,t>n&&(n=t)):t<this.track.bottom&&(this.track.bottom=t,t<e&&(e=t))},onMousemove(t){if(!this.isEnterDown)return;const e=this.$refs["slider"].clientWidth;t.clientX-this.pos.left-this.diff-10+W>e||t.clientX-this.pos.left-this.diff-10<0||(this.calcTrack(t.clientY),this.cardMovePos=(this.width-5*this.radius+2)/(this.$refs["slider"].clientWidth-W)*(t.clientX-this.pos.left-this.diff-11),this.$refs["card"].style.transform=`translate3d(${this.cardMovePos}px,0,0)`,this.$refs["btn"].style.transform=`translate3d(${t.clientX-this.pos.left-this.diff-10}px, 0, 0)`,this.$refs["progress-bar"].style.width=`${t.clientX-this.pos.left-this.diff-10}px`,this.$refs["progress-bar"].style.background="#42c3fc")},onMouseup(t){this.isEnterDown&&(this.isEnterDown=!1,this.clickPos!==t.clientX&&(this.cardMovePos+3>this.x&&this.cardMovePos-3<this.x?(this.tips="验证通过",this.$refs["progress-bar"].style.background="#2cd277",setTimeout(()=>{this.$emit("success",{top:Math.abs(this.track.bottom-this.track2.bottom),bottom:Math.abs(this.track.top-this.track2.top)})},1e3)):(setTimeout(()=>{this.$emit("fail")},1e3),this.$refs["progress-bar"].style.background="#ff5b57"),setTimeout(()=>{this.reset(),this.$refs["progress-bar"].style.transition="0.3s all",this.$refs["progress-bar"].style.width="0px",this.$refs["btn"].style.transition="0.3s all",this.$refs["btn"].style.transform="translate3d(0,0,0)",this.$refs["card"].style.transition="0.3s all",this.$refs["card"].style.transform="translate3d(0,0,0)",Array.isArray(this.src)?this.initCanvas(this.src[Math.floor(Math.random()*this.src.length)]):this.initCanvas(this.src)},1e3)))},random(t,e){return Math.floor(Math.random()*(e-t+1)+t)},initCanvas(t){const e=this.$refs["bg"],n=this.$refs["card"],i=e.getContext("2d"),s=n.getContext("2d"),r=this.radius,o=4*r,a=6*r;this.x=this.random(this.width/2,this.width-a);const l=this.random(2*r,this.height-a),h=new Image;h.crossOrigin="Anonymous",h.onload=()=>{i.drawImage(h,0,0,this.width,this.height),s.drawImage(h,0,0,this.width,this.height);const t=l-2*r+3,e=s.getImageData(this.x,t,a,a);n.width=a,s.putImageData(e,0,t)};const c={x:this.x,y:l,w:o,r:r};h.src=t,this.draw(i,"fill",c),this.draw(s,"clip",c)},reset(){const t=this.$refs["bg"].getContext("2d"),e=this.$refs["card"],n=e.getContext("2d");t.clearRect(0,0,this.width,this.height),n.clearRect(0,0,this.width,this.height),e.width=this.width},draw(t,e,n){const i=Math.PI,{x:s,y:r,w:o,r:a}=n;t.beginPath(),t.lineTo(s,r),t.arc(s+o/2,r,a,i,0),t.lineTo(s+o,r),t.arc(s+o,r+o/2,a,1.5*i,.5*i),t.lineTo(s+o,r+o),t.lineTo(s,r+o),t.arc(s,r+o/2,a,.5*i,1.5*i,!0),t.closePath(),t.lineWidth=2,t.fillStyle="rgba(255, 255, 255, 0.7)",t.strokeStyle="rgba(255, 255, 255, 0.7)",t.stroke(),t[e](),t.globalCompositeOperation="destination-over"}}},O=z,U=(n("d10e"),l(O,H,j,!1,null,"48604140",null)),Y=U.exports;Y.install=t=>t.component(Y.name,Y);var X=Y,V=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("img",{directives:[{name:"watermark",rawName:"v-watermark",value:{src:t.src,text:"hello world"},expression:"{src: src, text: 'hello world'}"}],staticClass:"img"})])},F=[],J={name:"Watermark",data(){return{src:""}},directives:{watermark:{inserted(t,e){const{src:n,text:i,opacity:s=.3,rotate:r=20,fontSize:o=20,type:a="repeat"}=e.value;t.src=n,t.addEventListener("load",e=>{const n=document.createElement("canvas"),l=n.getContext("2d"),h=document.createElement("canvas"),c=h.getContext("2d"),u=e.target.width,f=e.target.height;n.width=u,n.height=f,h.width=u,h.height=f,c.font=`${o}px Arial`,c.fillStyle=`rgba(0,0,0,${s})`,c.textBaseLine="middle";const d=c.measureText(i).width+50;if("repeat"===a){c.rotate(-r*Math.PI/180);const t=Math.ceil(u/d)+15,e=Math.ceil(f/d)+15;for(let n=0;n<t;n++)for(let t=0;t<e;t++)c.fillText(i,n*d-Math.min(r,90)-3*d,t*(d/2)-Math.min(r,90)-3*d)}else"left-top"===a?c.fillText(i,30,30+o):"right-top"===a?c.fillText(i,u-30-d,30+o):"right-bottom"===a?c.fillText(i,u-30-d,f-30):"left-bottom"===a&&c.fillText(i,30,f-30);l.clearRect(0,0,u,f),l.drawImage(t,0,0,u,f),l.drawImage(h,0,0,u,f),t.parentNode.appendChild(n),setTimeout(()=>{t.parentNode.removeChild(t)},0)})}}}},G=J,q=(n("d4c9"),l(G,V,F,!1,null,null,null)),K=q.exports;K.install=t=>t.component(K.name,K);var Q=K;const Z=[u,w,D,N,X,Q],tt=t=>{tt.installed||Z.map(e=>t.component(e.name,e))};"undefined"!==typeof window&&window.Vue&&tt(window.Vue);var et={install:tt,CheckIn:u,Countdown:w,ImgLabel:D,Magnifier:N,SlideCheck:X,Watermark:Q};e["default"]=et}})}));
//# sourceMappingURL=vue-gn-components.umd.min.js.map