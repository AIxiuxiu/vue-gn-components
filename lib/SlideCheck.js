module.exports=function(t){var s={};function e(i){if(s[i])return s[i].exports;var r=s[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}return e.m=t,e.c=s,e.d=function(t,s,i){e.o(t,s)||Object.defineProperty(t,s,{enumerable:!0,get:i})},e.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,s){if(1&s&&(t=e(t)),8&s)return t;if(4&s&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(e.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&s&&"string"!=typeof t)for(var r in t)e.d(i,r,function(s){return t[s]}.bind(null,r));return i},e.n=function(t){var s=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(s,"a",s),s},e.o=function(t,s){return Object.prototype.hasOwnProperty.call(t,s)},e.p="/",e(e.s="a44b")}({2877:function(t,s,e){"use strict";function i(t,s,e,i,r,n,o,a){var h,c="function"===typeof t?t.options:t;if(s&&(c.render=s,c.staticRenderFns=e,c._compiled=!0),i&&(c.functional=!0),n&&(c._scopeId="data-v-"+n),o?(h=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),r&&r.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(o)},c._ssrRegister=h):r&&(h=a?function(){r.call(this,this.$root.$options.shadowRoot)}:r),h)if(c.functional){c._injectStyles=h;var l=c.render;c.render=function(t,s){return h.call(s),l(t,s)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,h):[h]}return{exports:t,options:c}}e.d(s,"a",(function(){return i}))},"755d":function(t,s,e){},a44b:function(t,s,e){"use strict";e.r(s);var i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"wrap",style:{width:t.width+"px"},on:{mouseup:t.onMouseup,mousemove:function(s){return s.stopPropagation(),t.onMousemove(s)},mouseleave:t.onMouseup}},[e("div",{staticClass:"tips-info"},[e("span",{staticClass:"tips"},[t._v("完成拼图验证")]),t.showNextImg?e("span",{staticClass:"next-img",on:{click:t.onNextImg}},[t._v("换一张")]):t._e()]),e("div",{staticClass:"slider-check-wrap",style:{width:t.width+"px"}},[e("canvas",{ref:"bg",staticClass:"bg-canvas",attrs:{width:t.width,height:t.height}}),e("canvas",{ref:"card",staticClass:"card-canvas",attrs:{width:t.width,height:t.height}}),e("div",{staticClass:"slider-wrap"},[e("div",{ref:"progress-bar",staticClass:"progress-bar"}),e("div",{ref:"btn",staticClass:"btn",on:{mousedown:function(s){return s.stopPropagation(),t.onMousedown(s)}}},[t._v(">")]),e("div",{ref:"slider",staticClass:"slider"},[t._v(t._s(t.tips))])])])])},r=[];const n=50;var o={name:"SlideCheck",props:{radius:{type:Number,default:10},src:{type:[String,Array],default:""},width:{type:Number,default:300},height:{type:Number,default:300},theme:{type:String,default:"#369"}},data(){return{range:0,tips:"向右滑动完成拼图"}},computed:{showNextImg(){return Array.isArray(this.src)&&this.src.length>1}},mounted(){Array.isArray(this.src)?this.initCanvas(this.src[0]):this.initCanvas(this.src),this.initDomInfo()},methods:{onNextImg(){this.reset(),Array.isArray(this.src)?this.initCanvas(this.src[Math.floor(Math.random()*this.src.length)]):this.initCanvas(this.src)},initDomInfo(){this.pos=this.$refs["btn"].getBoundingClientRect(),"#369"!==this.theme&&(this.$refs["slider"].style.boxShadow=`0 0 10px 0 ${this.theme}`,this.$refs["slider"].style.color=this.theme,this.$refs["btn"].style.background=this.theme,this.$refs["btn"].style.boxShadow=`0 0 10px 0 ${this.theme}`)},onMousedown(t){this.track={top:t.clientY,bottom:t.clientY},this.track2={top:t.clientY,bottom:t.clientY},this.isEnterDown=!0,this.clickPos=t.clientX,this.tips="向右滑动完成拼图",this.$refs["btn"].style.transition="",this.$refs["card"].style.transition="",this.$refs["progress-bar"].style.transition="",this.diff=t.clientX-this.pos.left},calcTrack(t){let s=this.track.top,e=this.track.bottom;t>this.track.top?(this.track.top=t,t>e&&(e=t)):t<this.track.bottom&&(this.track.bottom=t,t<s&&(s=t))},onMousemove(t){if(!this.isEnterDown)return;const s=this.$refs["slider"].clientWidth;t.clientX-this.pos.left-this.diff-10+n>s||t.clientX-this.pos.left-this.diff-10<0||(this.calcTrack(t.clientY),this.cardMovePos=(this.width-5*this.radius+2)/(this.$refs["slider"].clientWidth-n)*(t.clientX-this.pos.left-this.diff-11),this.$refs["card"].style.transform=`translate3d(${this.cardMovePos}px,0,0)`,this.$refs["btn"].style.transform=`translate3d(${t.clientX-this.pos.left-this.diff-10}px, 0, 0)`,this.$refs["progress-bar"].style.width=`${t.clientX-this.pos.left-this.diff-10}px`,this.$refs["progress-bar"].style.background="#42c3fc")},onMouseup(t){this.isEnterDown&&(this.isEnterDown=!1,this.clickPos!==t.clientX&&(this.cardMovePos+3>this.x&&this.cardMovePos-3<this.x?(this.tips="验证通过",this.$refs["progress-bar"].style.background="#2cd277",setTimeout(()=>{this.$emit("success",{top:Math.abs(this.track.bottom-this.track2.bottom),bottom:Math.abs(this.track.top-this.track2.top)})},1e3)):(setTimeout(()=>{this.$emit("fail")},1e3),this.$refs["progress-bar"].style.background="#ff5b57"),setTimeout(()=>{this.reset(),this.$refs["progress-bar"].style.transition="0.3s all",this.$refs["progress-bar"].style.width="0px",this.$refs["btn"].style.transition="0.3s all",this.$refs["btn"].style.transform="translate3d(0,0,0)",this.$refs["card"].style.transition="0.3s all",this.$refs["card"].style.transform="translate3d(0,0,0)",Array.isArray(this.src)?this.initCanvas(this.src[Math.floor(Math.random()*this.src.length)]):this.initCanvas(this.src)},1e3)))},random(t,s){return Math.floor(Math.random()*(s-t+1)+t)},initCanvas(t){const s=this.$refs["bg"],e=this.$refs["card"],i=s.getContext("2d"),r=e.getContext("2d"),n=this.radius,o=4*n,a=6*n;this.x=this.random(this.width/2,this.width-a);const h=this.random(2*n,this.height-a),c=new Image;c.crossOrigin="Anonymous",c.onload=()=>{i.drawImage(c,0,0,this.width,this.height),r.drawImage(c,0,0,this.width,this.height);const t=h-2*n+3,s=r.getImageData(this.x,t,a,a);e.width=a,r.putImageData(s,0,t)};const l={x:this.x,y:h,w:o,r:n};c.src=t,this.draw(i,"fill",l),this.draw(r,"clip",l)},reset(){const t=this.$refs["bg"].getContext("2d"),s=this.$refs["card"],e=s.getContext("2d");t.clearRect(0,0,this.width,this.height),e.clearRect(0,0,this.width,this.height),s.width=this.width},draw(t,s,e){const i=Math.PI,{x:r,y:n,w:o,r:a}=e;t.beginPath(),t.lineTo(r,n),t.arc(r+o/2,n,a,i,0),t.lineTo(r+o,n),t.arc(r+o,n+o/2,a,1.5*i,.5*i),t.lineTo(r+o,n+o),t.lineTo(r,n+o),t.arc(r,n+o/2,a,.5*i,1.5*i,!0),t.closePath(),t.lineWidth=2,t.fillStyle="rgba(255, 255, 255, 0.7)",t.strokeStyle="rgba(255, 255, 255, 0.7)",t.stroke(),t[s](),t.globalCompositeOperation="destination-over"}}},a=o,h=(e("be87"),e("2877")),c=Object(h["a"])(a,i,r,!1,null,"8a6689d6",null),l=c.exports;l.install=function(t){t.component(l.name,l)};s["default"]=l},be87:function(t,s,e){"use strict";var i=e("755d"),r=e.n(i);r.a}});